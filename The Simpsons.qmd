---
title: "The Simpsons Viewership Analysis"
format: 
  html:
    toc: true
    code-fold: true
execute:
  echo: false
---

## 1. Show Description  
*The Simpsons* is an American animated sitcom created by Matt Groening that premiered on December 17, 1989. The series follows the satirical adventures of the Simpson family - Homer, Marge, Bart, Lisa, and Maggie - in the fictional town of Springfield. As the longest-running American scripted primetime television series, it has become a cultural phenomenon.

## 2. Show Visual  
```{python}
#| label: fig-logo
#| fig-cap: "The Simpsons Official Logo"
#| fig-align: center
from IPython.display import Image
Image("https://en.wikipedia.org/wiki/The_Simpsons#/media/File:The_Simpsons_yellow_logo.svg", width=400)

## 3. Basic Statistics
#  
#| label: tbl-stats
#| tbl-cap: "Basic Statistics"
import pandas as pd
from IPython.display import display

metrics = pd.DataFrame({
    "Metric": ["Seasons", "Episodes", "Peak Viewership", "Current Viewership", "IMDb Rating"],
    "Value": [36, 782, "33.6 million (S3E1, 1991)", "1.2 million (S35)", "8.6/10"]
})

display(metrics.style.hide(axis="index").set_properties(**{'text-align': 'left'}))

## 3. Viewership Trend

#| label: fig-trend
#| fig-cap: "Average Seasonal Viewership (Millions)"
import matplotlib.pyplot as plt

seasons = range(1, 36)
viewers = [13.4, 17.5, 23.1, 23.8, 20.6, 19.3, 18.1, 17.8, 15.7, 11.3,
           10.5, 9.1, 8.7, 8.1, 7.4, 7.2, 6.7, 6.3, 5.8, 5.2, 4.3,
           3.8, 3.5, 3.1, 2.9, 2.7, 2.4, 2.1, 1.9, 1.7, 1.5, 1.3, 1.1, 1.23, 1.2]

plt.figure(figsize=(10,5))
plt.plot(seasons, viewers, 'o-', color='#F14E28', linewidth=2)
plt.title("The Simpsons Viewership (Seasons 1-35)")
plt.xlabel("Season Number")
plt.ylabel("Viewers (Millions)")
plt.xticks(range(0, 36, 5))
plt.grid(alpha=0.2)
plt.show()

## 5. Yearly Changes

#| label: fig-changes
#| fig-cap: "Season-to-Season Viewership Changes (%)"
changes = [(viewers[i]-viewers[i-1])/viewers[i-1]*100 for i in range(1,len(viewers))]

plt.figure(figsize=(10,5))
plt.bar(seasons[1:], changes, color=['#2CA02C' if x >=0 else '#D62728' for x in changes])
plt.axhline(0, color='black', linewidth=0.8)
plt.title("Yearly Viewership Changes")
plt.xlabel("Season Number")
plt.ylabel("Percentage Change")
plt.grid(axis='y', alpha=0.2)
plt.show()

## 6. Trend Analysis  
```{python}
#| label: tbl-analysis
#| tbl-cap: "Key Viewership Changes"
#| output: asis

print(f"""
**Key Findings:**

1. **Peak Performance**  
   - Season 3 averaged {viewers[2]:.1f}M viewers  
   - {((viewers[2]-viewers[0])/viewers[0]*100):.1f}% increase from Season 1  

2. **Biggest Drop**  
   - {min(changes):.1f}% between Seasons {changes.index(min(changes))+1}-{changes.index(min(changes))+2}  

3. **Modern Era**  
   - Last 5 seasons average {sum(viewers[-5:])/5):.1f}M  
   - Â±{max(abs(x) for x in changes[-5:]):.1f}% fluctuations  

4. **Total Decline**  
   - {((viewers[0]-viewers[-1])/viewers[0]*100):.1f}% overall decrease  
""")

## References {#references}

### Data Sources
1. [The Simpsons Episode Guide](https://en.wikipedia.org/wiki/List_of_The_Simpsons_episodes), Wikipedia  
2. [Nielsen Historical Ratings](https://www.nielsen.com/us/en/ratings/), Nielsen Media Research  
3. [IMDb Episode Ratings](https://www.imdb.com/title/tt0096697/episodes), Amazon  

### Image Credits
- Logo: [Fair use via Wikimedia Commons](https://en.wikipedia.org/wiki/The_Simpsons#/media/File:The_Simpsons_yellow_logo.svg)